<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SA Health Medical Pay Calculator</title>
    <style>
        :root { --primary: #8a1538; --bg: #f9f9f9; --card: #ffffff; --text: #333; --border: #ddd; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background: var(--bg); color: var(--text); padding: 20px; max-width: 1200px; margin: 0 auto; 
        }
        h2 { border-bottom: 4px solid var(--primary); padding-bottom: 12px; color: var(--primary); margin-top: 0; }
        
        .panel { background: var(--card); padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 20px; border: 1px solid var(--border); }
        .controls-row { display: flex; gap: 20px; flex-wrap: wrap; align-items: end; }
        .control-group { flex: 1; min-width: 250px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 13px; color: #555; }
        select, input[type="number"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }

        .grid-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px; }
        @media (max-width: 1000px) { .grid-container { grid-template-columns: 1fr; } }
        
        .week-card { background: var(--card); border-radius: 8px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid var(--border); }
        .week-header { font-weight: 800; color: var(--primary); margin-bottom: 12px; text-transform: uppercase; font-size: 13px; border-bottom: 2px solid #eee; padding-bottom: 8px; display: flex; justify-content: space-between; }

        .day-row { display: grid; grid-template-columns: 40px 70px 70px 60px 100px 30px 1fr; gap: 8px; align-items: center; margin-bottom: 10px; }
        .day-label { font-weight: 600; font-size: 13px; color: #444; }
        
        input[type="text"] { padding: 8px; border: 1px solid #ddd; border-radius: 4px; text-align: center; width: 100%; font-family: monospace; box-sizing: border-box; }
        input[type="text"]:focus { border-color: var(--primary); background: #fff5f7; outline: none; box-shadow: 0 0 0 2px rgba(138, 21, 56, 0.2); }
        
        .unrost-in { background: #fffbfb; border-color: #ffcccc !important; color: #c0392b; font-weight: 600; }
        .oncall-select { font-size: 11px; padding: 6px; }

        .badge { font-size: 10px; font-weight: 700; padding: 3px 6px; border-radius: 4px; color: white; white-space: nowrap; margin-right: 4px; display: inline-block; }
        .bg-ord { background-color: #777; } 
        .bg-pm { background-color: #d81b60; }   
        .bg-night { background-color: #4a148c; } 
        .bg-sat { background-color: #e65100; }   
        .bg-sun { background-color: #c62828; }   
        .bg-ph { background-color: #8e44ad; }    
        .bg-ot { background-color: #b71c1c; border: 1px solid #ff5252; } 
        .bg-wk-ot { background-color: #bf360c; }
        .bg-allow { background-color: #006064; }

        .payslip-box { background: white; border-radius: 8px; border: 1px solid #e0e0e0; margin-top: 30px; overflow: hidden; }
        .payslip-head { background: #333; color: white; padding: 15px; font-weight: 700; display: flex; justify-content: space-between; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th { text-align: left; background: #f4f4f4; padding: 10px 15px; border-bottom: 2px solid #ddd; color: #555; font-size: 12px; text-transform: uppercase; }
        td { padding: 10px 15px; border-bottom: 1px solid #eee; }
        td.amount { text-align: right; font-family: monospace; font-size: 15px; font-weight: 600; }
        .total-row td { background: #fafafa; font-weight: 800; font-size: 16px; border-top: 2px solid #333; color: #333; }
        
        .copy-btn { font-size: 11px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 4px; cursor: pointer; color: white; border: 1px solid rgba(255,255,255,0.4); text-transform: uppercase; }
        .copy-btn:hover { background: rgba(255,255,255,0.3); }

        .disclaimer { text-align:center; padding: 20px; font-size: 12px; color: #777; margin-top: 20px; border-top: 1px solid #eee; }

/* --- NAVIGATION BAR --- */
    .navbar {
        background-color: #2c3e50; /* Dark Slate background */
        overflow: hidden;
        border-radius: 6px;
        margin-bottom: 25px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        display: flex;
        flex-wrap: wrap; /* Allows wrapping on mobile */
        justify-content: center; /* Centers the links */
    }

    .navbar a {
        flex: 1 1 auto; /* Allows links to grow evenly */
        display: block;
        color: #f2f2f2;
        text-align: center;
        padding: 12px 10px;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        transition: background 0.3s;
        min-width: 50px; /* Prevents squishing on tiny screens */
    }

    .navbar a:hover {
        background-color: #ddd;
        color: black;
    }
    
    /* Optional: State colors on hover/active if you want them */
    .navbar a[href*="vic"]:hover { background-color: #005eb8; color: white; }
    .navbar a[href*="nsw"]:hover { background-color: #d32f2f; color: white; }
    .navbar a[href*="qld"]:hover { background-color: #800000; color: white; }
    .navbar a[href*="sa"]:hover  { background-color: #8a1538; color: white; }
    .navbar a[href*="wa"]:hover  { background-color: #00796b; color: white; }
    .navbar a[href*="nt"]:hover  { background-color: #d35400; color: white; }
        
    </style>
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JKM65Q9K0W"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JKM65Q9K0W');
</script>


    
<body>

<nav class="navbar">
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/">Home</a>
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/vic/">VIC</a>
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/nsw/">NSW</a>
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/qld/">QLD</a>
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/sa/">SA</a>
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/wa/">WA</a>
    <a href="https://invisiblejunior.github.io/junior-doctor-pay-calculator/nt/">NT</a>
</nav>
    
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 20px;">
        <div>
            <h2>SA Medical Pay Calculator</h2>
            <div style="font-size: 13px; color: #666;">SMOEA 2025 (Rates Effective 14 Apr 2025)</div>
        </div>
    </div>

    <div class="panel">
        <div class="controls-row">
            <div class="control-group">
                <label>Classification (Schedule 1.3)</label>
                <select id="roleSelector" onchange="updateUI()">
                    <option value="Intern">Intern ($88,869)</option>
                    <option value="MP2">Medical Practitioner Step 2 ($96,569)</option>
                    <option value="MP3">Medical Practitioner Step 3 ($104,266)</option>
                    <option value="MP4">Medical Practitioner Step 4 ($120,432)</option>
                    <option value="MP5">Medical Practitioner Step 5 ($130,438)</option>
                    <option value="MP6">Medical Practitioner Step 6 ($138,137)</option>
                    <option value="MP7">Medical Practitioner Step 7 ($145,834)</option>
                    <option value="MP8">Medical Practitioner Step 8 ($153,533)</option>
                    <option value="SnrReg1">Senior Registrar Step 1 ($158,151)</option>
                    <option value="SnrReg2">Senior Registrar Step 2 ($164,308)</option>
                </select>
            </div>
            <div class="control-group">
                <label>Professional Development (Annual)</label>
                <select id="pdaSelector" onchange="updateUI()">
                    <option value="0">None (or Intern)</option>
                    <option value="4500">Non-Training ($4,500)</option>
                    <option value="10000" selected>Vocational Training ($10,000)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="grid-container">
        <div class="week-card" id="week1"></div>
        <div class="week-card" id="week2"></div>
    </div>

    <div class="payslip-box">
        <div class="payslip-head">
            <span>ESTIMATED PAYSLIP</span>
            <button class="copy-btn" onclick="copyToClipboard()">Copy</button>
        </div>
        <table id="payslipTable">
            <thead>
                <tr>
                    <th width="45%">Pay Component</th>
                    <th width="15%">Units</th>
                    <th width="15%">Rate</th>
                    <th width="25%" style="text-align:right">Total</th>
                </tr>
            </thead>
            <tbody id="payslipBody"></tbody>
            <tfoot>
                <tr class="total-row">
                    <td colspan="3">GROSS TOTAL</td>
                    <td class="amount" id="grossTotal">$0.00</td>
                </tr>
            </tfoot>
        </table>
    </div>

    <div class="disclaimer">
        <strong>Unofficial Estimator | SA Health SMOEA 2025</strong><br>
        <strong>Clause 62:</strong> Fortnightly Aggregate Overtime >76h (1.5x) and >110h (2.0x).<br>
        <strong>Clause 62.3:</strong> Sunday OT (>76h bucket or Unrostered) is 200%.<br>
        <strong>Clause 58.5:</strong> Weekly Excess (>68h) capped at 200%.<br>
    </div>

<script>
    const RATES = {
        "Intern": 88869, "MP2": 96569, "MP3": 104266, "MP4": 120432, "MP5": 130438,
        "MP6": 138137, "MP7": 145834, "MP8": 153533, "SnrReg1": 158151, "SnrReg2": 164308
    };
    const ON_CALL_NIGHT = 50.07;
    const ON_CALL_FULL = 79.54;
    const DAYS = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

    function init() {
        renderWeek('week1', 0);
        renderWeek('week2', 7);
        loadData();
    }

    function saveData() {
        const data = {
            role: document.getElementById('roleSelector').value,
            pda: document.getElementById('pdaSelector').value,
            days: []
        };
        for (let i = 0; i < 14; i++) {
            data.days.push({
                start: document.getElementById(`start_${i}`).value,
                end: document.getElementById(`end_${i}`).value,
                unrost: document.getElementById(`unrost_${i}`).value,
                oncall: document.getElementById(`oncall_${i}`).value,
                ph: document.getElementById(`ph_${i}`).checked
            });
        }
        localStorage.setItem('saDocCalc2025_Fixed', JSON.stringify(data));
    }

    function loadData() {
        const raw = localStorage.getItem('saDocCalc2025_Fixed');
        if (!raw) { updateUI(); return; }
        try {
            const data = JSON.parse(raw);
            if (data.role) document.getElementById('roleSelector').value = data.role;
            if (data.pda) document.getElementById('pdaSelector').value = data.pda;
            if (data.days) {
                data.days.forEach((day, i) => {
                    document.getElementById(`start_${i}`).value = day.start || '';
                    document.getElementById(`end_${i}`).value = day.end || '';
                    document.getElementById(`unrost_${i}`).value = day.unrost || '';
                    document.getElementById(`oncall_${i}`).value = day.oncall || 'none';
                    document.getElementById(`ph_${i}`).checked = day.ph || false;
                });
            }
            updateUI();
        } catch (e) { console.error(e); }
    }

    function renderWeek(containerId, offset) {
        const container = document.getElementById(containerId);
        container.innerHTML = `
            <div class="week-header">
                <span>${offset===0 ? "Week 1" : "Week 2"}</span>
                <span>${offset===0 ? "Weekly Cap: 68h" : "Fortnightly Cap: 76h"}</span>
            </div>
            <div class="day-row header-labels">
                <span>Day</span>
                <span>Start</span>
                <span>Finish</span>
                <span title="Unrostered OT">U.OT</span>
                <span>On Call</span>
                <span>PH</span>
                <span>Status</span>
            </div>
        `;

        DAYS.forEach((day, index) => {
            const i = offset + index;
            const div = document.createElement('div');
            div.className = 'day-row';
            
            const tabIdxStart = (i * 2) + 1;
            const tabIdxEnd = (i * 2) + 2;

            div.innerHTML = `
                <span class="day-label">${day}</span>
                <input type="text" id="start_${i}" placeholder="0800" tabindex="${tabIdxStart}" onblur="formatTime(this)" onchange="calculate()">
                <input type="text" id="end_${i}" placeholder="1700" tabindex="${tabIdxEnd}" onblur="formatTime(this)" onchange="calculate()">
                <input type="number" id="unrost_${i}" class="unrost-in" placeholder="" tabindex="-1" min="0" max="24" step="0.5" onchange="calculate()">
                <select id="oncall_${i}" class="oncall-select" tabindex="-1" onchange="calculate()">
                    <option value="none">-</option>
                    <option value="night">Night</option>
                    <option value="full">24h</option>
                </select>
                <input type="checkbox" id="ph_${i}" tabindex="-1" onchange="calculate()">
                <div id="status_${i}" class="status-cell"></div>
            `;
            container.appendChild(div);
        });
    }

    function formatTime(input) {
        let val = input.value.replace(/[^0-9]/g, '');
        if (!val) return;
        if (val.length <= 2) {
            if (parseInt(val) < 10) val = "0" + parseInt(val);
            input.value = val + ":00";
        } else if (val.length >= 3) {
            if (val.length === 3) val = "0" + val;
            input.value = val.substring(0,2) + ":" + val.substring(2,4);
        }
        calculate();
    }

    function updateUI() { calculate(); }

    function calculate() {
        saveData();
        const roleKey = document.getElementById('roleSelector').value;
        const pdaAnnual = parseFloat(document.getElementById('pdaSelector').value) || 0;
        const annualBase = RATES[roleKey];
        const hourlyRate = annualBase / 52.1666 / 38; 
        const pdaFortnightly = pdaAnnual / 26.08; 

        let buckets = {
            "Ordinary":             { hrs: 0, rate: hourlyRate, total: 0, css: "bg-ord" },
            "Shift (PM 15%)":       { hrs: 0, rate: hourlyRate * 0.15, total: 0, css: "bg-pm" },
            "Shift (Night 25%)":    { hrs: 0, rate: hourlyRate * 0.25, total: 0, css: "bg-night" },
            "Weekend (Sat 50%)":    { hrs: 0, rate: hourlyRate * 1.50, total: 0, css: "bg-sat" },
            "Weekend (Sun 50%)":    { hrs: 0, rate: hourlyRate * 1.50, total: 0, css: "bg-sun" },
            "Weekend (Sun 75%)":    { hrs: 0, rate: hourlyRate * 1.75, total: 0, css: "bg-sun" },
            "Public Holiday (2.5x)":{ hrs: 0, rate: hourlyRate * 2.50, total: 0, css: "bg-ph" },
            "Weekly Excess (2.0x)": { hrs: 0, rate: hourlyRate * 2.00, total: 0, css: "bg-wk-ot" },
            "Overtime (1.5x)":      { hrs: 0, rate: hourlyRate * 1.50, total: 0, css: "bg-ot" },
            "Overtime (2.0x)":      { hrs: 0, rate: hourlyRate * 2.00, total: 0, css: "bg-ot" },
            "On Call Allowance":    { count: 0, rate: 1, total: 0, css: "bg-allow" },
            "PDA":                  { count: 1, rate: pdaFortnightly, total: pdaFortnightly, css: "bg-allow" }
        };

        for(let k=0; k<14; k++) document.getElementById(`status_${k}`).innerHTML = '';
        
        // Badge Set to prevent duplicates
        let dayBadges = Array(14).fill(null).map(() => new Set());

        let segments = [];
        let wk1Cum = 0;
        let wk2Cum = 0;
        let fnCum = 0;
        let sundayTracker = { 6: 0, 13: 0 }; 

        for (let i = 0; i < 14; i++) {
            const sVal = document.getElementById(`start_${i}`).value;
            const eVal = document.getElementById(`end_${i}`).value;
            const uOT = parseFloat(document.getElementById(`unrost_${i}`).value) || 0;
            const ocType = document.getElementById(`oncall_${i}`).value;
            const isPH = document.getElementById(`ph_${i}`).checked;
            
            // On Call
            if (ocType === "night") buckets["On Call Allowance"].total += ON_CALL_NIGHT;
            if (ocType === "full") buckets["On Call Allowance"].total += ON_CALL_FULL;
            if (ocType !== "none") buckets["On Call Allowance"].count++;

            // Rostered
            if (sVal && eVal) {
                let sParts = sVal.split(':');
                let eParts = eVal.split(':');
                let start = new Date(2000, 0, 1, sParts[0], sParts[1]);
                let end = new Date(2000, 0, 1, eParts[0], eParts[1]);
                if (end < start) end.setDate(end.getDate() + 1);
                
                let sH = start.getHours() + start.getMinutes()/60;
                let eH = end.getHours() + end.getMinutes()/60;
                if (end.getDate() > 1) eH += 24;

                let dur = eH - sH;
                if (end.getDate() > 1) {
                    let pre = 24 - sH;
                    let post = eH - 24;
                    segments.push({ dayIdx: i, hrs: pre, s: sH, e: 24, type: 'rost', isPH: isPH });
                    let nextPH = document.getElementById(`ph_${i+1}`) ? document.getElementById(`ph_${i+1}`).checked : false;
                    segments.push({ dayIdx: i+1, hrs: post, s: 0, e: post, type: 'rost', isPH: nextPH });
                } else {
                    segments.push({ dayIdx: i, hrs: dur, s: sH, e: eH, type: 'rost', isPH: isPH });
                }
            }

            // Unrostered
            if (uOT > 0) {
                segments.push({ dayIdx: i, hrs: uOT, type: 'unrost', isPH: isPH });
            }
        }

        // Sort
        segments.sort((a,b) => (a.dayIdx - b.dayIdx) || (a.s - b.s));

        segments.forEach(seg => {
            let i = seg.dayIdx;
            let dayName = DAYS[i % 7];
            let isWk2 = i >= 7;
            
            // SPECIAL SUNDAY OT RULE: Immediate 2.0x for unrostered
            if (seg.type === 'unrost' && dayName === 'Sun') {
                addToBucket("Overtime (2.0x)", seg.hrs, hourlyRate * 2.0);
                addBadge(i, "Sun OT 2.0x", "bg-ot", dayBadges);
                
                // Track for caps but don't re-pay
                if (isWk2) wk2Cum += seg.hrs; else wk1Cum += seg.hrs;
                fnCum += seg.hrs;
                sundayTracker[i] += seg.hrs; 
                return; 
            }

            let rem = seg.hrs;
            let processed = 0;

            while(rem > 0.001) {
                let step = Math.min(rem, 0.5);
                
                let wkTotal = isWk2 ? (wk2Cum + processed) : (wk1Cum + processed);
                let fnTotal = fnCum + processed;
                let sunDaily = (dayName === 'Sun') ? (sundayTracker[i] + processed) : 0;

                let isWeeklyExcess = (wkTotal >= 68);
                let isSunExcess = (dayName === 'Sun' && sunDaily >= 8);
                let isFnOT1 = (fnTotal >= 76);
                let isFnOT2 = (fnTotal >= 110);
                
                let finalBucket = "";
                let finalRate = 1.0;
                let badge = "";

                if (isFnOT2) {
                    finalBucket = "Overtime (2.0x)";
                    finalRate = 2.0;
                    badge = "OT 2.0x";
                } else if (isFnOT1) {
                    if (dayName === 'Sun') {
                        finalBucket = "Overtime (2.0x)";
                        finalRate = 2.0;
                        badge = "Sun OT 2.0x";
                    } else {
                        if (seg.isPH) {
                            finalBucket = "Public Holiday (2.5x)";
                            finalRate = 2.5;
                            badge = "PH 2.5x";
                        } else {
                            finalBucket = "Overtime (1.5x)";
                            finalRate = 1.5;
                            badge = "OT 1.5x";
                        }
                    }
                } else {
                    // Ordinary
                    if (seg.isPH) {
                        finalBucket = "Public Holiday (2.5x)";
                        finalRate = 2.5;
                        badge = "PH 2.5x";
                    } else {
                        let bucketName = "Ordinary";
                        
                        if (dayName === 'Sun') {
                            if (isSunExcess) { 
                                bucketName = "Weekend (Sun 75%)"; 
                                finalRate = 1.75;
                                badge = "Sun 1.75x";
                            } else { 
                                bucketName = "Weekend (Sun 50%)"; 
                                finalRate = 1.50;
                                badge = "Sun 1.5x";
                            }
                        } else if (dayName === 'Sat') {
                            bucketName = "Weekend (Sat 50%)";
                            finalRate = 1.50;
                            badge = "Sat 1.5x";
                        } else {
                            // Mon-Fri Shift
                            if (seg.type === 'rost') {
                                let midPoint = seg.s + (processed + step/2);
                                if (midPoint >= 24) midPoint -= 24; 
                                
                                let isPM = (seg.s >= 12 && seg.e > 18);
                                let isNight = (midPoint >= 0 && midPoint < 8);
                                
                                if (isNight) {
                                    bucketName = "Shift (Night 25%)";
                                    finalRate = 1.25;
                                    badge = "Night 1.25x";
                                } else if (isPM) {
                                    bucketName = "Shift (PM 15%)";
                                    finalRate = 1.15;
                                    badge = "PM 1.15x";
                                }
                            }
                        }

                        // Weekly Excess
                        if (isWeeklyExcess) {
                            let newRate = finalRate + 0.50;
                            if (newRate > 2.0) newRate = 2.0;
                            
                            finalRate = newRate;
                            bucketName = "Weekly Excess (2.0x)";
                            badge = "Wk>68h (2.0x)";
                        }
                        finalBucket = bucketName;
                    }
                }

                addToBucket(finalBucket, step, hourlyRate * finalRate);
                if(badge) addBadge(i, badge, getBadgeCss(badge), dayBadges);

                rem -= step;
                processed += step;
            }

            if (isWk2) wk2Cum += seg.hrs; else wk1Cum += seg.hrs;
            fnCum += seg.hrs;
            if (dayName === 'Sun') sundayTracker[i] += seg.hrs;
        });

        // Helper: Multiplies Rate by Hours for Correct Pay Total
        function addToBucket(name, hrs, rateVal) {
            buckets[name].hrs += hrs;
            buckets[name].total += (hrs * rateVal);
        }

        // New Logic: Check Set before adding to DOM
        function addBadge(dayIdx, text, css, setArray) {
            if (!setArray[dayIdx].has(text)) {
                setArray[dayIdx].add(text);
                let cell = document.getElementById(`status_${dayIdx}`);
                cell.innerHTML += `<span class="badge ${css}">${text}</span> `;
            }
        }
        
        function getBadgeCss(txt) {
            if(txt.includes("OT")) return "bg-ot";
            if(txt.includes("PH")) return "bg-ph";
            if(txt.includes("Sun")) return "bg-sun";
            if(txt.includes("Sat")) return "bg-sat";
            if(txt.includes("Night")) return "bg-night";
            if(txt.includes("PM")) return "bg-pm";
            if(txt.includes("Wk")) return "bg-wk-ot";
            return "bg-ord";
        }

        renderPayslip(buckets);
    }

    function renderPayslip(buckets) {
        const tbody = document.getElementById('payslipBody');
        tbody.innerHTML = '';
        let grandTotal = 0;

        for (const [name, data] of Object.entries(buckets)) {
            if (data.total < 0.01) continue;

            let unitTxt = data.hrs > 0 ? data.hrs.toFixed(2) + ' h' : data.count;
            let rateTxt = '$' + (data.rate || 0).toFixed(2);
            if(name === "PDA") { unitTxt = "F/N"; rateTxt = "Allow"; }

            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><span class="badge ${data.css}" style="margin-right:10px">${name}</span></td>
                <td>${unitTxt}</td>
                <td>${rateTxt}</td>
                <td class="amount">$${data.total.toFixed(2)}</td>
            `;
            tbody.appendChild(tr);
            grandTotal += data.total;
        }
        document.getElementById('grossTotal').innerText = '$' + grandTotal.toFixed(2);
    }

    function copyToClipboard() {
        let text = "SA MEDICAL PAYSLIP\n";
        text += "Role: " + document.getElementById('roleSelector').value + "\n";
        text += "-------------------------------------\n";
        const rows = document.querySelectorAll('#payslipBody tr');
        rows.forEach(row => {
            const cols = row.querySelectorAll('td');
            text += `${cols[0].innerText.padEnd(25)} | ${cols[3].innerText}\n`;
        });
        text += "-------------------------------------\n";
        text += "TOTAL: " + document.getElementById('grossTotal').innerText;
        navigator.clipboard.writeText(text).then(() => alert("Copied"));
    }

    init();
</script>

</body>
</html>
